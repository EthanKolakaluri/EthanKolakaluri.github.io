<!DOCTYPE html>
<html>
<head>
	<title>Odin.ai</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		.chat-window {
			width: 400px;
			height: 400px;
			border: 1px solid black;
			overflow-y: scroll;
			padding: 10px;
		}
		.chat-window p {
			margin: 5px;
		}
	</style>
</head>
<body>
	<h1>Chatbot</h1>
	<p>Type your message below:</p>
	<input type="text" id="user-input">
	<button id="send-button">Send</button>
	<button id="reset-button">Reset</button>

	<div class="chat-window" id="chat-window"></div>

	<script>
		const user_input = document.getElementById("user-input");
		const chat_window = document.getElementById("chat-window");
		const send_button = document.getElementById("send-button");
		const reset_button = document.getElementById("reset-button");

		function submitMessage() {
			const userInput = user_input.value;
			user_input.value = "";

			fetch("http://127.0.0.1:5000/api/data", {
				method: "POST",
				headers: {
					"Content-Type": "application/json"
				},
				body: JSON.stringify({ message: userInput })
			})
			.then(response => response.json())
			.then(data => {
				const userParagraph = document.createElement("p");
				userParagraph.textContent = "You: " + userInput;
				userParagraph.style.color = "blue";
				chat_window.appendChild(userParagraph);

				const responseParagraph = document.createElement("p");
				responseParagraph.textContent = "Bot: " + data.response;
				responseParagraph.style.color = "green";
				chat_window.appendChild(responseParagraph);
			})
			.catch(error => {
				console.error(error);
			});
		}

		function resetChat() {
			chat_window.innerHTML = '';
			user_input.value = '';
		}

		send_button.addEventListener("click", submitMessage);
		reset_button.addEventListener("click", resetChat);

		user_input.addEventListener('keypress', function(e) {
			if (e.key === 'Enter') {
				submitMessage();
			}
		});
	</script>
</body>
</html>
